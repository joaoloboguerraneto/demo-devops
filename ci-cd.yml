deploy:
  runs-on: ubuntu-latest
  needs: build

  steps:
  - name: Checkout code
    uses: actions/checkout@v3

  - name: Set up kubectl
    uses: azure/setup-kubectl@v3
    with:
      version: 'v1.29.2'

  - name: Deploy to Kubernetes
    env:
      KUBECONFIG: ${{ secrets.KUBECONFIG }}
    run: |
      kubectl apply -f k8s-deployment.yml
